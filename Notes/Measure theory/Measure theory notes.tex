\documentclass{article}
\usepackage[margin=1in]{geometry}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{url}
\usepackage{todonotes}

% Environments

\newtheorem{theorem}{Theorem}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{conjecture}[theorem]{Conjecture}

\theoremstyle{definition}
\newtheorem{example}[theorem]{Example}

\numberwithin{theorem}{section}
\numberwithin{equation}{section}

\newcommand{\alg}{\mathcal{A}}
\newcommand{\sig}{\mathcal{S}}
\newcommand{\mono}{\mathcal{M}}
\newcommand{\sigmes}{\Lambda_{\mu^*}}
%opening
\title{Measures}
\author{Eric Luu}

\begin{document}

\maketitle
\section{What is a measure?}

\subsection{Algebras and $\sigma$-algebras}
Let $X$ be a nonempty set, and let $2^X$ be its powerset. Then a collection $\alg \subset 2^X$ is an algebra if it satisfies the properties:

\begin{enumerate}
	\item $\emptyset$ is in $\alg$
	\item $\alg$ is closed under complementation
	\item $\alg$ is closed under finite union.
\end{enumerate}
Note that this implies that $X \in \alg$ and $\alg$ is closed under finite intersection, by De Morgan's law. Note that algebras are not closed under inclusion, meaning that if $B \subset A$ then $B$ may not be in $\alg$.

\subsubsection{$\sigma$-algebra}
Let $x$ be a nonempty set. Then $\sig \subset 2^X$ is a $\sigma$-algebra if:
\begin{enumerate}
	\item $\sig$ is an algebra
	\item $\sig$ is closed under countable unions. 
\end{enumerate}
Every $\sigma$-algebra is also closed under countable intersection. 

\begin{example}
	\begin{enumerate}
		\item $2^X$ is a $\sigma$-algebra. This is the smallest $\sigma$-algebra on a set.
		\item $\lbrace \emptyset, X \rbrace$ is a $\sigma$-algebra. Note that this is the largest $\sigma$-algebra on a set.
		\item If $A \subset X$, then $\lbrace \emptyset, X, A, A^C \rbrace$ is a $\sigma$-algebra.
		\item $X$ is infinite, collection of finite elements is not an algebra-not closed under complementation. 
		\item If $X$ is infinite, then $\mathcal{C}:= \lbrace A \subset X : A \text{ or } A^c \text{ is finite} \rbrace$ is an algebra but not a $\sigma$-algebra. Consider countable union of singleton elements.
		\item If $X$ is uncountable, then the collection of countable elements is not an algebra. This is not closed under complementation.
		\item If $X$ is uncountable, the collection $\mathcal{C} := \lbrace A \subset X : A \text{ or } A^C \text{ is countable} \rbrace$ is a $\sigma$-algebra. It is closed under complementation.
		\begin{proof}
			Obviously, $\emptyset$ is in $\mathcal{C}$. Then suppose $A$ is in $\mathcal{C}$. Then either $A$ or $A^c$ is countable, so $A^c$ is also in $\mathcal{C}$. Now suppose we have a family $(A_i)_i \subseteq \mathcal{C}$. Then if all of $(A_i)_i$ is countable, its union is also. But if there is an $A \in (A_i)_i$ which is uncountable but its complement is countable, then the complement of the union is the intersection of the complements which is countable.
		\end{proof}
		\item The collection $C_1$ of $\mathbb{R}$ that can be written as a finite union of the type $(a, b]$, $(a, \infty)$, $(-\infty, b]$, $(-\infty, \infty)$ is an algebra but not a $C^*$-algebra. Note that $(1/2, 1] \cup (1/4, 1/3] \cup ...$ is not in $C_1$.
	\end{enumerate}
\end{example}

Remarks: Intersections of $\sigma$-algebras is a $\sigma$-algebra. The union of two algebras is not necessarily an algebra. For all $\mathcal{F} \subset 2^X$, there exists a smallest $\sigma$-algebra $\sigma(\mathcal{F})$ which contains $\mathcal{F}$. This comes from taking the intersections of all $\sigma$-algebras containing $\mathcal{F}$. 

\begin{example}[Borel sets]
	Let $(X, d)$ be a separable metric space, such that there exists a countable subset such that all open sets contains at least one element in the subset. Then the Borel-$\sigma$-algebra is the smallest $\sigma$-algebra on the open sets in $X$.
\end{example}

A monotone class on $X$ is a collection $\mathcal{M}$ of subsets of $X$ that is closed under monotone unions and monotone intersections.
\begin{enumerate}
	\item if $A_1 \subset A_2 \subset ..., $ then $\bigcup_{n \in \mathbb{N}} A_n \in \mathcal{M}$.
	\item if $A_1 \supset A_2 \supset ..., $ then $\bigcap_{n \in \mathbb{N}} A_n \in \mathcal{M}$.
\end{enumerate}
\begin{lemma}[Monotone class lemma]
	Let $\alg$ be an algebra. Then $\mathcal{M}(\alg) = \sigma(\alg)$.
\end{lemma}

\begin{proof}
	Every $\sigma$-algebra is a monotone class, so the smallest monotone class containing $\alg$ is inside the smallest $\sigma$-algebra containing $\alg$. Thus it suffices to show that $\mono$ is a $\sigma$-algebra.
	
	Let $\mono_0$ be the subset of $\mono(\alg)$ of all $F \in \mono(\alg)$ where $F^c \in \mono(\alg)$. Then $\alg \in \mono_0$, and $\mono_0$ is a monotone class from De Morgan's law. $(\bigcup_{n \in \mathbb{N}} A_n)^c = \bigcap_{n \in \mathbb{N}} A_n^c$ thus the complement is contained in $\mono_0$. Therefore, $\mono_0 = \mono(\alg)$ from definition.
	\par
	Now consider a family of sets $(A_n)_n \subset \mathcal{M}(\alg)$. Define a set $B_n = \cup_{i = 1}^n A_i$. Then we have that this is a monotone class, so the union of $B_i$ is in $\mono(A)$. Therefore, we have closure under countable unions. 
	Thus $\mono(A) = \sigma(A)$.
\end{proof}

\subsection{Measures on algebras}
Let $\alg$ be an algebra on $X$. Then $\mu : \alg \rightarrow [0, \infty]$ is a measure if:

\begin{enumerate}
	\item $\mu(\emptyset) = 0$
	\item If $\lbrace A_n \rbrace_{n \in \mathbb{N}} \subset \alg$ is a pointwise disjoint family with $\cup_{n \in \mathbb{N}} A_n \in \alg$, then
	\begin{equation}
		\mu \left( \bigcup_{n \in \mathbb{N}} A_n\right) = \sum_{n \in \mathbb{N}} \mu(A_n).
	\end{equation}
	This is known as $\sigma$-additivity.
\end{enumerate}

\subsection{Extension of measures.}
Since algebras and $\sigma$-algebras are not closed under subsets, then we do not get that if $M \subset N$ and $\mu(N) = 0$, then $\mu(M) = 0$ as it may be the case that $M$ is not in $\alg$. Thus, we want to complete the measure in some formal sense.

\begin{definition}
	If $A \in 2^X$, then let
	\begin{equation}
		\mu^*(A) := \inf \left\lbrace \sum_{j \in \mathbb{N}} \mu(E_j) : A \subset \bigcup_{j \in \mathbb{N}} E_j, E_j \in \alg \right\rbrace
	\end{equation}
\end{definition} 
Note that $\mu^*(A) \leq \mu(X)$, as $X$ is in $\alg$. We set $\mu^*(A) = \infty$ if no cover exists with finite summation.

\begin{lemma}
	We have that:
	\begin{enumerate}
		\item $\mu^*(\emptyset) = 0$
		\item $\mu^*(A) \geq 0$ for all $A \in 2^X$
		\item $\mu^*(A) \leq \mu^*(B)$ when $A \subset B$. If $\lbrace E_j \rbrace_{j \in \mathbb{N}}$ is a cover of $B$, then it is a cover of $A$.
		\item $\mu^*(A) = \mu(A)$ when $A \in \alg$. 
		\item If $\lbrace A_n \rbrace_{n \in \mathbb{N}}$ is a sequence of subsets of $X$, then
		\begin{equation}
			\mu^*\left(\bigcup_{n \in \mathbb{N}} A_n \right) \leq \sum_{n \in \mathbb{N}} \mu^*(A_n).
		\end{equation}
	\end{enumerate}
\end{lemma}
The last property states that $\mu^*$ is $\sigma$-subadditive.

\begin{proof}[Item 4]
	We have that $\mu^*(A) \leq \mu(A)= \mu(A)$ as $A$ is a cover of itself. However, consider any cover of $A$ in $\alg$. Note that $A = \bigcup_{j \in \mathbb{N}}(A_j \cap A)$, meaning that $\mu(A) \leq \sum_{j \in \mathbb{N}} \mu(A \cap A_j) \leq \sum_{j \in \mathbb{N}} \mu(A_j)$
	Thus $\mu(A) \leq \sum_{j \in \mathbb{N}} \mu(A_j)$ for any cover $\lbrace A_j \rbrace_{j \in \mathbb{N}}$. 
\end{proof}

\begin{proof}[Subadditivity]
	Let $\varepsilon > 0$. Then for each $n \in \mathbb{N}$, let $\lbrace A_{n_j} \rbrace_{j \in \mathbb{N}}$ be a sequence where $A_n \subset \bigcap_{j \in \mathbb{N}}  A_{n_j}$ and $\sum_{j \in \mathbb{N}}\mu(A_{n_j}) \leq \mu(A_n) + 2^{-n} \varepsilon$. We have that the size of the covering sequence gets exponentially smaller for each element. 
	
	Then we have that 
	\begin{equation}
		\mu^* \left(\bigcup_{n \in \mathbb{N}}A_n \right) \leq \sum_{n \in \mathbb{N}} \sum_{j \in \mathbb{N}} \mu(A_{n_j}) \leq \sum_{n \in \mathbb{N}}\mu^*(A_n) + \varepsilon
	\end{equation}
\end{proof}

\subsubsection{Caratheodory's theorem}

\begin{definition}
	We have that $E \subset X$ is called $\mu^*$-measurable whenever:
	\begin{equation}
			\mu^*(A) = \mu^*(A \cap E) + \mu^*(A \cap E^C)
	\end{equation}
	 for all $A \subseteq X$.
\end{definition}
The collection of all $\mu^*$-measurable subsets of $X$ is called $\sigmes$. It contains $\alg$.
Note that $ \alg$ is a subset of $\sigmes$. Let $A$ be in $\alg$ and let $B \subset X$. Then we have that $\mu^*(B) = \sum_{n \in \mathbb{N}}\mu(A_n)$ for some collection of $A_n \in \alg$. However, we can split apart $A_n = (A_n \cap A) \cup (A_n \cap A^c)$ such that
\begin{equation}
	\mu^*(B) = \sum_{n \in \mathbb{N}}\mu(A_n\cap A \cup A_n \cap A^c) = \sum_{n \in \mathbb{N}} \mu(A_n \cap A) + \sum_{n \in \mathbb{N}} \mu(A_n \cap A^c) \geq \mu^*(A \cap B) + \mu^*(A^c \cap B)
\end{equation}
 Finally, $\mu^*(A \cap B) + \mu^*(A^c \cap B) \geq \mu^*((A \cap B) \cup (A^c \cap B)) = \mu^*(A \cap (E \cup E^c)) = \mu^*(A)$. 

What sets are $\mu^*$-measurable?
\begin{itemize}
	\item Sets in $\alg$
	\item Null sets
\end{itemize}

Is this measure complete?
\begin{theorem}
	The outer measure is complete.
\end{theorem}
\begin{proof}
	Let $\mu^*(B) = 0$, and let $A \subseteq B$. Then we have that for all $C \subset X$. Then we want that $\mu^*(C) = \mu^*(C \cap B) + \mu^*(C \cap B^c)$. But we have that for all $\epsilon > 0$, there is a cover of $B$ such that the $\mu^*(C \cap B) < \varepsilon$. But this cover is the same as the cover for $A$, so we have that $ \mu^*(C) = \mu^*(C \cap B^c) \leq \mu^*(C \cap A^c) \leq \mu^*(C)$, meaning that $ \mu^*(C \cap A) = 0$ and $\mu^*(C \cap A^c) = \mu^*(C)$. Therefore, $A$ is also measurable. 
\end{proof}

\begin{theorem}[Hahn extension theorem]
	Suppose $\mu$ is $\sigma$-finite on $\alg$. Then $\mu^*$ is the only additive extension from $\mu$ to $\Lambda_{\mu^*}$. 
\end{theorem}
\todo{prove this!}

\section{Lebesgue measure}
We define the algebra $\mathcal{C}_m$ of intervals in $\mathbb{R}^m$. We then define the volume to be:
\begin{definition}[Volume]
	\begin{equation*}
		\text{Vol}_m(I) := \prod_{k = 1}^m |b_k - a_k|
	\end{equation*}
\end{definition}

Then we use the Caratheodory extension lemma to form the Lebesgue-measurable sets, with the Lebesgue measure being defined as $\lambda_m(A) := \text{Vol}_m^*\llcorner \Gamma_{\text{Vol}_m^*}$.

\begin{example}
	Some examples of measurable sets are:
	\begin{itemize}
		\item Intervals, or boxes
		\item Countably many isolated points
		\item Open sets in the topology (Borel measure)
	\end{itemize}
\end{example}
We have that the Lebesgue measure is translation and rotation invariant.
\subsubsection{Almost open, closed and compact}
\begin{theorem}[Almost open]
	A subset $E \subset \mathbb{R}^m$ is Lebesgue iff it is almost open, meaning that for all $\varepsilon > 0$, there exists an open set $E \subset U$ and $\lambda_m(U\setminus E) \equiv \lambda_m(U) - \lambda_m(E) < \varepsilon$. 
\end{theorem}
\begin{proof}[Proof of above theorem]
	Consider when $\lambda_m(E) \leq \infty$. Then given $\varepsilon > 0$, choose a sequence $\left\lbrace I_j \right\rbrace_{j \in \mathbb{N}} $ such that $E \subseteq \bigcup_{j \in \mathbb{N}}I_j$ and $\sum_{j \in \mathbb{N}} \lambda_mI_j < \varepsilon + \lambda_m(E)$. This set exists by the infinum property.
	Let $U := \bigcup_{j \in \mathbb{N}}I_j$. We have that $\lambda_m(U) \leq \sum_{j \in \mathbb{N}}\lambda_m(I_j) < \varepsilon + \lambda_m(E)$. Thus shown for $< \infty$. If $\lambda_m(E) = \infty$, then we use the $\sigma$-finiteness of $\mathbb{R}^m$. Let $(E_i)_i$ be a cover of $E$ and let $(U_i)_i$ be a cover such that $\lambda(U_i\setminus E_i) < 2^{-i} \varepsilon$. The the union of these $U_i$ is at most $ \varepsilon$. 
	
	Now suppose $E$ is almost open. Then for all $j \in \mathbb{N}$, let $U_i$ be an open set such that $\lambda_m(U_i \setminus E) < 1/j$. Then let $G = \cap U_j$. Then we have that $E \subseteq G$ and $\lambda_m(G \setminus E) < j^{-1}$ for all $j \in \mathbb{N}$. So $G \setminus E$ is Lebesgue measurable. Finally, note that $E =G \setminus (G \setminus E)$, which is measurable. 
\end{proof}

Similarly, we have that there is a set $F \subset E$ which is closed and has arbitrarily small measure difference, and there is a set $K$ which is compact and also has the difference.

\section{Counterexamples}
There are sets in $\mathbb{R}$ which are not Lebesgue measurable.
\subsection{Vitali set}
Let $\mathbb{D}$ be the set of decimal numbers, and let $V$ be the set of representatives of non-decimal numbers where we identify two non-decimal numbers if they differ by a decimal number. Then $\mathbb{D}$ is a Lebesgue null-set. 
Now consider $A = \cup_{d \in \mathbb{D}}(V + d)$. Suppose $\lambda(V) = 0$. then $\lambda(A) = \sum_{d \in \mathbb{D}} \lambda_1(V + d) = \sum_{d \in \mathbb{D}} \lambda_1(V) = 0$. but as $[0, 1] \subset A$. then $\lambda_1(A) > 1$.
Suppose $\lambda(V) > 0$. Then $\lambda_1(A) =  \sum_{d \in \mathbb{D}} \lambda_1(V)  = \infty$. But $A \subset [-1, 2]$, which has measure 3. Thus $V$ is not Lebesgue measrable and $V$ is not Borel. 

\subsection{Cantor set}
The Cantor set has measure 0, but is not the intersection of any open set. Thus the Cantor set is Lebesgue measurable nut not Borel measurable. 

\section{Lebesgue integral}
We say that $(X, \mathcal{S}, \mu)$ is a measure space. 
\subsection{Measurable functions}
We say that $f: X \rightarrow \mathbb{R} \cup \lbrace \pm \infty \rbrace$ is $\mu$-measurable if the sets $\lbrace x \in X | f(x) = \pm \infty \rbrace$ and $\lbrace x \in X : f(x) > \alpha \rbrace$ for all $\alpha \in \mathbb{R}$ are measurable. 

In other words, the preimage of any Borel set in $\mathbb{R} \cup \{\pm \infty\}$ is measurable. 

We can replace $> \alpha$ with $< \alpha$, $\geq \alpha$, $\leq \alpha$.
\begin{example}[Examples of measurable functions]
	An example of measurable functions is:
	\begin{enumerate}
		\item Constant functions
		\item Indicator functions of measurable sets
		\item Continuous functions
	\end{enumerate}
\end{example}
The reason why continuous functions are measurable is because the preimage of open sets are open, which are measurable. Extending to Borel sets, we have what we want. 


We have that if $\lbrace f_n \rbrace_{n \in \mathbb{N}}$ is a sequence of measurable functions, then $f(x) := \inf_{n \in \mathbb{N}} f_n(x)$ and $F(x) := \sup_{n \in \mathbb{N}} f_n(x)$ are both measurable. 
This is because $\lbrace x \in X : f(x) \geq \alpha \rbrace = \cap_{n \in \mathbb{N}} \lbrace x \in X : f_n(x) \geq \alpha \rbrace$ and $\lbrace x \in X : F(x) > \alpha \rbrace = \cup_{n \in \mathbb{N}} \lbrace x \in X : f_n(x) > \alpha \rbrace$.

\begin{definition}
	If $f$ is measurable and $g$ is a function such that the set where $f$ and $g$ disagree is a null-set, then $f = g$ almost everywhere (a.e.) and $g$ is measurable. 
\end{definition} 
We adopt the convention that $(f + g) (x) = f(x) + g(x)$ when $f$ and $g$ are not $\pm \infty$, and 0 otherwise.

We have that this forms a vector space with the inner product $(fg)(x) = f(x)g(x)$ also being measurable. We have that $f^+(x) := \sup(f(x), 0)$ and $f^-(x) := sup(-f(x), 0)$ is also measurable. 

Finally, we have that $|f(x)| $ is also measurable. 

We have that if $g$ is continuous and $f$ is measurable, then $g \circ f$ is measurable. 

If $f$ is a non-negative measurable function, then there exists a sequence $\lbrace \varphi_n \rbrace_{n \in \mathbb{N}} \subset M$ such that:
\begin{itemize}
	\item $0 \leq \phi_n(x) \leq \varphi_{n+1}(x)$
	\item $f(x) = \lim_{n \rightarrow \infty} \phi_n(x)$
	\item each function takes on a finite number of values. 
\end{itemize}
\subsection{Integration}
We say $\phi$ is simple if it takes on a finite number of values. If $\varphi$ is simple, then:

\begin{equation}
	\int_X \varphi d\mu := \sum_{j = 1}^N a_j \mu(E_j).
\end{equation}
If $f \in \mathcal{M}^+$, then \begin{equation}
	\int_X f d\mu := \sup \left \lbrace \int_X \varphi d\mu: \varphi \in \mathcal{M}^+, \mu \text{ is simple}, 0 \leq \varphi(x) \leq f(x) \right\rbrace \in [0, \infty].
\end{equation}
We have that if $E$ is measurable, then $\int_E f d\mu := \int_X \chi_E f d\mu$. 

\begin{lemma}
	Let $f$ be a non-negative measurable function. Then there exists a sequence of monotone increasing simple functions $\{ \varphi_n\}_n \subseteq \mathcal{M}$ that converge to $f$.
\end{lemma}
\begin{proof}
	Fix $n \in \mathbb{N}$. Then for $k \in \{0, 1, ..., (2^n - 1) n\}$, let
	\begin{equation}
		E_n^k := \left\{
		x \in X| 2^{-n} k \leq f(x) \leq 2^{-n}(k + 1)
		\right\}
	\end{equation}
	and define
	\begin{equation}
		\varphi_n := 2^{-n} \sum_{k = 0}^{2^n n} k \chi_{ E_n^k x}
	\end{equation}
	Then $\varphi_n$ converges pointwise to $f$ and is increasing. 
\end{proof}

\begin{theorem}[Monotone convergence theorem:]
	Let $\lbrace f_n \rbrace_{n \in \mathbb{N}}$ be an increasing sequence of functions in $\mathcal{M}^+$ converging pointwise to $f$. Then \begin{equation}
	\int_X f \, d\mu = \lim_{n \rightarrow \infty} \int_X f_n \, d\mu.
\end{equation}
\end{theorem}

\begin{proof}
	We have that
	\begin{equation}
		 \int f_n \, d\mu \leq \int f_{n + 1} \, d\mu \leq \int f \, d\mu
	\end{equation}
	from the fact that $f_n$ is increasing. 
	Thus we have that $\lim_{n \rightarrow \infty} \int f_n \, d\mu \leq \int f \, d\mu$. 
	To show the other way holds, take $\alpha \in (0, 1)$, and $\varphi$ a simple function with $0 \leq \varphi \leq f$. Then let $A_n = \left\{ x \in X : f_n(x) \geq \alpha \varphi \right\}$. Clearly $A_n$ is measurable, $A_n \subset A_{n + 1}$, $X = \cup A_n$. 
	Then we have that:
	\begin{equation}
		\int_{A_n} \alpha \varphi \, d\mu \leq \int_{A)n} f_n \, d\mu \leq \int f_n  \, d\mu. 
	\end{equation}
	Moreover, we have that $\lim_{n \rightarrow \infty} \int_{A_n} \varphi \, d\mu = \int_X \varphi \, d\mu$. 
	Therefore, we have that:
	\begin{equation}
		\alpha \int \varphi \, d\mu \leq \lim_{n \rightarrow \infty} \int f_n \, d\mu.
	\end{equation}
	Letting $\alpha$ go to 1, we have that:
	\begin{equation}
		\int \varphi \, d\mu \leq \lim_{n \rightarrow \infty} \int f_n \, d\mu.
	\end{equation}
	Then we have that as $\varphi$ is arbitrary, we take the supremum over all $\varphi$ to have that:
	\begin{equation}
		\int f \, d\mu \leq \lim_{n \rightarrow \infty} \int f_n \, d\mu.
	\end{equation}
\end{proof}

\begin{theorem}[Fatou's lemma:]
	Let $\lbrace f_n \rbrace_{n \in \mathbb{N}}$ be a sequence of functions in $\mathcal{M}^+$. Then \begin{equation}
		\int_X \liminf_{n\rightarrow \infty} f_n d\mu \leq \liminf_{n \rightarrow \infty} \int_X f_n d\mu.
	\end{equation}
\end{theorem}
\begin{proof}
	This falls out of the definition of $\liminf$ and MCT.
		Let $g_n := \inf \{ f_n, f_n + 1, ...\}$ pointwise. Then we have that $g_m \leq f_n$ for all $m \leq n$. Then we have that 
	
	\begin{equation}
		\int_X g_m \, d\mu \leq \int f_n \, d\mu
	\end{equation}
	so 
	\begin{equation}
		\int g_m \, d\mu \leq \liminf_{n \rightarrow \infty} \int f_n \, d\mu.
	\end{equation}
	
\end{proof}

\subsection{Integrable functions}
\begin{definition}
	A function $f \in \mathcal{M}$ is integrable iff $\int_X f^+ d \mu < \infty$ and $\int_X f^- d \mu < \infty$. Denote the vector space of functions as $\mathcal{L}$. 
\end{definition}

\begin{theorem}[Lebesgue Dominated convergence theorem]
	Let $\lbrace f_n \rbrace_{n \in \mathbb{N}} \subset \mathcal{L}$ such that $f_n$ converges almost everywhere to $f$. Then suppose there exists a function $g \in \mathcal{L}$ such that $|f_n| \leq g$ for all $n \in \mathbb{N}$. Then $f \in \mathcal{L}$ and:
	\begin{equation}
		\int f \, d\mu = \lim_{n \rightarrow \infty} \int f_n \, d\mu.
	\end{equation}
\end{theorem}
\begin{proof}
	Consider $g + f_n$ and $g - f_n$ and use Fatou's lemma. 
	
	We have that $g + f_n \geq 0$, therefore, we have that $\int \liminf g + f_n \, d\mu \leq \liminf \int g + f_n \, d\mu$. But pointwise convergence means the lower limit converges, so we have $\liminf f_n = f$, so
	\begin{equation}
		 \int g + f \, d\mu \leq \liminf \int g + f_n \, d\mu.
	\end{equation}
	Therefore, we have that
	\begin{equation}
		\int f \, d\mu \leq \liminf \int f_n \, d\mu.
	\end{equation}
	Conversely, we have that $g - f_n \geq 0$, therefore we have that:
	\begin{equation}
		\int g - f \, d\mu \leq \liminf \int g - f_n \, d\mu.
	\end{equation}
	This implies that:
	\begin{equation}
		\int f \, d\mu \geq \limsup \int f_n \, d\mu
	\end{equation}
	but this means that $\liminf \int f_n \, d\mu = \limsup \int f_n \, d\mu = \int f$. 
\end{proof}

\section{Lebesgue $L^p$ spaces}
We say that two functions $f\sim g$ iff $f = g$ a.e.. Then we define the quotient space $L^1(X, \mathcal{S}, \mu)$ as the identification of these elements. Then $\|f \|_{L^1(X)} = \int_X |f| \, d\mu$, which defines a norm on $L^1$. Indeed $\int_X |f| \, d\mu = 0$ iff $f$ is 0 a.e. 

\subsection{$L^p$ spaces, $p \in [1, \infty)$}
We let $L^p$ be the space of measurable functions where $|f|^p$ has finite integral. Then we say:

\begin{equation}
	\|f \|_p := \|f\|_{L^p} = \left(\int_X |f|^p \,  d\mu \right)^{1/p}.
\end{equation}


\begin{theorem}[Holder inequality]
	Let $p \in (1, \infty)$ and $f \in L^p$. Then define the dual exponent $q$ satisfying $1/p + 1/q = 1$. Then if $g \in L^q$, then 
	\begin{equation}
		\| fg \|_1 \leq \|f \|_p \| g \|_q
	\end{equation}
\end{theorem}
\begin{proof}
	We have that $a^\theta b^{1-\theta} \leq \theta a + (1 - \theta) b$.
	Then we let $\alpha = 1/p$, so $1 - \alpha = 1/q$. Then we set $A = a^p$, $B = b^q$, so we have that:
	\begin{equation}
		AB \leq \frac{A^p}{p} + \frac{B^q}{q}.
	\end{equation}
	Then let $A = \|f \|_p^{-1} |f|$, $B := \|g \|_q^{-1} |g|$. We have that:
	\begin{equation}
		|fg| \|f \|_p^{-1} \|g \|_q^{-1} \leq \frac{|f|^p}{p \|f\|_p^p} + \frac{|g|^q}{q \| g \|_q^q}.
	\end{equation}
	Integrating both sides, we have that:
	\begin{equation}
		\|fg \|_1 \|f \|_p^{-1} \|g \|_q^{-1} \leq \frac{\|f \|_p^p}{p \|f \|_p^p} + \frac{\|g \|_q^q}{q \|g \|_q^q} = \frac{1}{p} + \frac{1}{q} = 1 
	\end{equation}.
	Thus the required inequality is found. 
\end{proof}

\begin{theorem}[Minkowski Inequality]
	If $f$ and $g \in L^p$, so does $f + g$ and:
	\begin{equation}
	\| f + g \|_p \leq \|f \|_p + \| g \|_p
\end{equation}
\end{theorem}
\begin{proof}
	We have that:
	\begin{equation}
		|f + g|^p \leq 2^p (|f|^p + |g|^p)
	\end{equation}
	so we have what is needed. 
	Next, we have that:
	\begin{equation}
		|f + g|^p = |f + g|^{p-1} |f + g| \leq |f| |f + g|^{p-1} + |g| |f + g|^{p-1}.
	\end{equation}
	Setting $q = \frac{p}{p-1}$, we have that:
	
	\begin{equation}
		\| f + g\|_p^p \leq \int |f| |f + g|^{p-1}  \, d\mu +  \int |g| |f + g|^{p-1} \, d\mu
	\end{equation}
	so we use Holder's inequality to bound above. 
\end{proof}

\begin{lemma}
	If $\mu(X)$ is finite, and $1 \leq p_1 \leq p_2 < \infty$, then $L^{p_2} \subseteq L^{p_1}$. Furthermore,
	\begin{equation}
		\| f\|_{p_1} \leq |\mu(X)|^{1/ p_1 - 1/p_2} \| f \|_{p_2}
	\end{equation}
	Set $F = |f|^{p_1}$, $G = 1$, $p = p_2/p_1$. and use Holder inequality.
\end{lemma}

\begin{proposition}[Chebyshev Inequality]
	We have that $\mu \left( \left\lbrace x \in X : |f(x)| \leq \lambda\right\rbrace   \right) \leq \lambda^{-p} \int_X |f|^p d{\mu}$. 
\end{proposition}
We use the Holder inequality on $|f|^p$, $\rho = \lambda^p$.

\subsection{Space $L^\infty$}
We say that $L^{\infty}$ is the space of essentially bounded functions, which are $\mu$-measurable, $\mu$-almost everywhere bounded.
We define:
\begin{equation}
	S_f(N) := \sup \lbrace |f|(x): x \in N^c \rbrace
\end{equation}
and:
\begin{equation}
	\|f \|_{\infty} = \inf \lbrace S_f(N): N \in S, \mu(N) = 0 \rbrace
\end{equation}
so $f$ is in $L^\infty$ when there exists a null-set such that $f$ is bounded off of the null-set.

We say $f \in L^\infty$ when $\|f\|_{\infty} < \infty$. 
We have that $|f|(x) \leq \|f\|_{\infty}$ for $\mu$-almost every $x$. 

We have that $L^\infty$ is a normed space. where we take the sum of two elements $\|f + g \|_{\infty}$ to be the intersection of the almost-everywhere spaces. 
\begin{theorem}[Holder Inequality]
	Let $p \in [1, \infty]$. If $f \in L^p$ and $g \in L^\infty$, then:
	\begin{equation}
		\|fg \|_p \leq \|f\|_p \|g \|_\infty
	\end{equation}
\end{theorem}

\subsection{Completeness}
We say that $\left\lbrace f_n \right\rbrace_{n \in \mathbb{N}} \in L^p$ \textit{converges in $L^p$} to $g$ if:

\begin{equation}
	\lim_{n \rightarrow \infty} \| f_n - g \|_p = 0.
\end{equation}
The sequence is Cauchy if for any $\varepsilon > 0$, there exists $M \in \mathbb{N}$ such that:
\begin{equation}
	\|f_n - f_m \|_{p} \leq \varepsilon
\end{equation}
for all $n, m  > M$. 

\begin{theorem}[Riesz- Fischer]
	$L^p$ with $\| \cdot \|_{p}$ is complete, for $p \in [1, \infty)$. 
\end{theorem}
\subsection{Miscellania}
Simple functions are dense.

\begin{theorem}[Jensen's inequality]
	Suppose $\Omega \in \mathcal{S}$ is a $\mu$-measurable subset with finite measure. Then if $\varphi$ is convex and $f : X \rightarrow \mathbb{R}$ is integrable, then:
\begin{equation}
	\int_{\Omega} (\varphi \circ f) \, d\mu 
\end{equation}
is well defined
and
\begin{equation}
	\varphi \left(\frac{1}{\mu(\Omega)} \int_{\Omega} f \, d\mu \right)\leq \frac{1}{\mu(\Omega)}\int_{\Omega} (\varphi \circ f) \, d\mu 
\end{equation}
\end{theorem}

\section{Product measures}
We define a product measure of the product of a measure triple $(X, \mathcal{X}, \mu)$ and $(Y, \mathcal{Y}, \nu)$ as
\begin{equation}
	\pi(A \times B) = \mu(A) \nu(B)
\end{equation}
for $(A, B) \in \mathcal{X} \times \mathcal{Y}$. 

This is a measure as we can decompose any rectangle into disjoint unions of rectangles to show additivity. We can extend this to a measure space. We want $\mu$ and $\nu$ to be $\sigma$-finite so that $\pi$ is unique. 

\subsection{Iterated integration}
\begin{theorem}[Tonelli]
	Let $(X, \mathcal{X}, \mu)$ and $(Y, \mathcal{Y}, \nu)$ be two $\sigma$-finite measure triples, and let $f: X \times Y \rightarrow \mathbb{R}$ be a non-negative $\pi$-measurable function. Then the functions on $X$ and $Y$ by
	\begin{equation}
		f(x) := \int_Y F_x \, d\nu \quad \text{and} \quad g(y) := \int_X F^y \, d\mu
	\end{equation}
are measurable, and:
\begin{equation}
	\int_X f \, d\mu = \int_{X \times Y} F \, d\pi = \int_Y g \, d\nu.
\end{equation}
\end{theorem}
Fubini's theorem gives an refinement to integrable functions. 
\begin{theorem}[Tonelli]
	Let $(X, \mathcal{X}, \mu)$ and $(Y, \mathcal{Y}, \nu)$ be two $\sigma$-finite measure triples, and let $f: X \times Y \rightarrow \mathbb{R}$ be a non-negative $\pi$-integrable function. Then the functions on $X$ and $Y$ by
	\begin{equation}
		f(x) := \int_Y F_x \, d\nu \quad \text{and} \quad g(y) := \int_X F^y \, d\mu
	\end{equation}
	are integrable, and:
	\begin{equation}
		\int_X f \, d\mu = \int_{X \times Y} F \, d\pi = \int_Y g \, d\nu.
	\end{equation}
\end{theorem}
Proof follows from Tonelli's theorem. 

\section{Decomposition of measures}

\begin{lemma}
	Let $\mu$ and $\nu$ be two finite measures on a $\sigma$-algebra $(X, \mathcal{S})$ such that $0 \leq \nu \leq \mu$ on $\mathcal{S}$. Then there exists a unique (up to null set) $\mu$-measurable function $f_0$ with $0 \leq f \leq 1$ such that:
	\begin{equation}
		\nu(E) = \int_E f_0 \, d\mu
	\end{equation}
	for all $E \in \mathcal{S}$. 
\end{lemma}

\begin{theorem}[Radon-Nickodym]
	Let $\mu$ and $\nu$ be two $\sigma$-finite measures on a $\sigma$-algebra $(X, \mathcal{S})$. Then there is a unique pair $D \in S$ with $\mu(D) = 0$ and a non-negative $\mu$-measurable function $f_0$ (defined up to a null-set) such that:
	\begin{equation}
		\nu(E) = \nu(E \cap D) + \int_E f_0 \, d\mu
	\end{equation}
\end{theorem}

\section{Radon-Nickodym implications}
We say that two measures $\mu$ and $\nu$ are mutually singular if there exists sets $A, B \in \mathcal{S}$ such that $X = A \cup B$, $\emptyset = A \cap B$ and $\mu(A) = 0 = \nu(B)$. Denoted as $\mu \perp \nu$.
We say that $\nu$ is absolutely continuous wrt $\mu$, denoted $\nu \ll \mu$ if whenever $\mu(D) = 0$, then $\nu(D) = 0$. 

\begin{theorem}[Lebesgue decomposition theorem]
	Let $\mu$, $\nu$ be $\sigma$-finite measures. Then we can decompose $\nu$ to $\nu = \nu_1 + \nu_2$ where $\nu_1$ is mutually singular and $\nu_2$ is absolutely continuous wrt $\mu$. 
\end{theorem}
\begin{proof}
	According to Radon- Nickodym, we have $D \in \mathcal{S}$ with $\mu(D) = 0$ and a unique function $f_0$ such that:
	\begin{equation}
		\nu(E) = \nu(E \cap D) + \int_E f_0 \, d\mu \quad \forall E \in \mathcal{S}.
	\end{equation}
	Then let $\nu_1(E) = \nu(E \cap D)$ and $\nu_2(E) = \int_E f_0 \, d\mu$. Then $\nu_2 \ll \mu$. Letting $A = D$, $B = D^c$, we have that $v_1 \perp \mu$. 
\end{proof}

\subsection{Radon-Nickodym derivative}
Let $\nu \ll \mu$. Then we have that $\nu(E) = \int_E f_0 \, d\mu$. Then $\dfrac{d\nu}{d\mu} := f_0$ be the Radon-Nickodym derivative. It shares many properties with a standard Riemannian derivative.

\begin{theorem}
	Let $\mu, \nu$, and $\omega$ be $\sigma$-finite measures on $(X, \mathcal{S})$.
	\begin{enumerate}
		\item Then if $\mu \ll \nu$ and $f$ is $\mu$-measurable, then
		\begin{equation}
			\int_X f \, d\nu = \int_X (\dfrac{d\nu}{d\mu}) f d\mu
		\end{equation}
		\item If $\nu \ll \mu$ and $\omega \ll \mu$, then
		\begin{equation}
			\dfrac{d(\nu + \omega)}{d\mu} = \dfrac{d\nu}{d\mu} + \dfrac{d\omega}{d\mu}
		\end{equation}
		\item If $\nu \ll \mu \ll \omega$, then
		\begin{equation}
			\dfrac{d\nu}{d\omega} = \dfrac{d\nu}{d\mu} \dfrac{d\mu}{d\omega}
		\end{equation}
		Finally, if $\nu \ll \mu$ and $\mu \ll \nu$, then
		\begin{equation}
			\dfrac{d\nu}{d\mu} \dfrac{d\mu}{d\nu} = 1
		\end{equation}
	\end{enumerate}
\end{theorem}

\begin{proof}
	\begin{enumerate}
		\item 
		We have there exists $f_0$ such that:
		\begin{equation}
			\nu(E) = \int_E f_0 d\mu
		\end{equation}
		for all $E \in \mathcal{S}$ and $\dfrac{d\nu}{d\mu} = f_0$.
		
		If $f$ is a characteristic function, then $\int_X f \, d\nu = \nu(A) = \int_A f_0 \, d\mu = \int_X f f_0 d\mu$. 
		
		We extend linearly to simple functions. 
		Then we have that:
		\begin{equation}
			\int_X \varphi \, d\nu = \int_X \varphi f_0 \, d\mu
		\end{equation}
		for $\varphi$ being a simple function. We can then show it holds for all non-negative measurable functions using the MCT and extend to integrable functions. 
		\item
		We have that there exists $f_0, f_1$ such that $\nu(E) = \int_E f_0 \, d\mu$ and $\omega(E) = \int_E f_1 \, d\mu$. 
		
		Therefore, $(\nu + \omega)(E) = \int_E (f_0 + f_1) \, d\mu$ which proves the result above.
		\item Let $f_0, f_1$ be such that $\nu(E) = \int_E f_0 \, d\mu$, $\mu(E) = \int_E f_1 \, d\omega$. We then have that by the first above,  $\nu(E) = \int_E f_0 (\dfrac{d\mu}{d\omega}) \, d\omega$, therefore we have that $\dfrac{d \nu}{d \omega} = \dfrac{d\nu}{d\mu} \dfrac{d\mu}{d\omega}$. 
		\item Set $\omega = \nu$. Then we have that $\dfrac{d\nu}{d\nu} = 1$ which is the result above. 
	\end{enumerate}
\end{proof}

\subsection{Rietz Representation}
We have that elements in the dual space live in the dual exponent. 

\section{Modes of convergence}
We have a series of ways for things to converge to a function.

\begin{itemize}
	\item Pointwise, $f_n \xrightarrow{pt} f$. For every $x \in X$ and every $\varepsilon > 0$, there exists an $N_{x,\varepsilon} \in \mathbb{N}$ sich that $|f_n(x) - f(x) | < \varepsilon$ for all $n > N_{x,\varepsilon}$. 
	\item Uniformly, $f_n \xrightarrow{unif} f$. For every $x \in X$ and every $\varepsilon > 0$, there exists an $N_{\varepsilon} \in \mathbb{N}$ sich that $|f_n(x) - f(x) | < \varepsilon$ for all $n > N_{ \varepsilon}$. 
	\item almost everywhere $f_n \xrightarrow{a.e.} f$: The set of points where $f_n$ does not converge pointwise to $f$ has zero measure.
	\item in $L^p$, $f_n \xrightarrow{L^p} f$, $\lim_{n \rightarrow \infty} \| f_n  - f \|_p = 0$. 
	
	We also have two new modes of convergence. 
	\item almost uniformly $f_n \xrightarrow{a.u.} f$ for every $\delta > 0$, there exists $E_\delta \in \mathcal{S}$ with $\mu(E_\delta) < \delta$ such that $f_n$ converges uniformly to $f$ on $E^c_\delta$. 
\end{itemize}



\section{Lebesgue measure approximation}
We denote all continuous functions with compact support on an open set $V$ as $C^0_c(V)$ and the collection of smooth functions with compact support as $C^\infty_c(V)$. 
\begin{theorem}[Urysohn]
	Let $K \subset V$ be two subsets of $\mathbb{R}^d$ with $K$ compact and $V$ open. Then there exists a continuous function $u: \mathbb{R}^d  \rightarrow [0, 1]$ such that $u|_K = 1$ and $supp(u) \subset V$. 
\end{theorem}

We have that $C^0_c(\mathbb{R}^d)$ is dense in $L^p(\mathbb{R}^d)$. 

\begin{proposition}
	Let $\tilde{f} \in L^p(\mathbb{R}^d)$ for some $p \in [1, \infty)$. For $y \in \mathbb{R}^d$ and $\varepsilon > 0$, consider
	\begin{equation}
		F(\tilde{f}, \varepsilon, y) := \int_{\mathbb{R}^d} |\tilde{f}(x - \varepsilon y) - \tilde{f}(x)|^p \, dx.
	\end{equation}
	Then $\lim_{x \searrow 0} F(\tilde{f} \varepsilon, y) = 0$. 
\end{proposition}
Any non-negative function $\eta \in C^\infty_c(\mathbb{R}^d)$ satisfying $\int_{\mathbb{R}^d} \eta \, dx = 1$ is a mollifier. If $\eta$ is a mollifier, then $n_\varepsilon := \varepsilon^{-d} \eta(x/\varepsilon)$ is also a mollifier and $\left\{\eta_\varepsilon \right\}_{\varepsilon > 0}$ is known as a mollifying sequence. 
\begin{example}
	Let $\alpha := \int_{\mathbb{R}^d}\exp(\frac{-1}{(1 - |x|^2)})\, dx$ and let 
		\begin{equation}
			\eta(x) := \frac{1}{\eta}\begin{cases}
				\exp(\frac{-1}{(1 - |x|^2)}) &, |x| < 1\\
				0 &, |x| \geq 1
			\end{cases}
		\end{equation}
\end{example} 
$\eta$ is a mollifier. 

\begin{definition}
	Any function $f \in L^p(V)$ can be extended outside of $V$ by setting $f$ to be zeros outside. Define this function $\tilde{f}$. We then define the convolution product with any mollifier
	\begin{equation}
		f_\varepsilon := (\eta_\varepsilon \ast f )(x) := \int_{\mathbb{R}^d} \eta_\varepsilon(y) \tilde{f}(x - y) \, dy
	\end{equation}
\end{definition}

\begin{lemma}
	$f_\varepsilon(x)$ is bounded and smooth. 
\end{lemma}

\begin{lemma}
	Let $V \subset \mathbb{R}^d$ be open. Then $\left\{f_\varepsilon \right\}_{\varepsilon > 0}$ converges to $f$ in $L^p(V)$ as $\varepsilon \searrow 0$. 
\end{lemma}

We have that $C^\infty_c(V)$ is dense in $L^p(V)$ for all $v \in [1, \infty)$. 

\begin{theorem}[Young's inequality]
	Let $ f \in L^p(\mathbb{R}^d)$ and $g \in L^q(\mathbb{R}^d)$ for $1 \leq p , q < \infty$ and $\frac{1}{p} + \frac{1}{q} \geq 1$. Then:
	\begin{equation}
		\| f \ast g \|_{L^r}(\mathbb{R}^d) \leq \| f \|_{L^p(\mathbb{R}^d)}\| g \|_{L^q(\mathbb{R}^d)}
	\end{equation}
	for 
	\begin{equation}
		\frac{1}{r} = \frac{1}{p} + \frac{1}{q} - 1.
	\end{equation}
	
\end{theorem}

\begin{theorem}[Lusin's theorem]
	Let $f$ be measurable in $E \subset \mathbb{R}^d$. Then for any $\varepsilon > 0$, there exists a set $F_\varepsilon E$ such that:
	\begin{equation}
		\lambda_d(F_\varepsilon) < \varepsilon
	\end{equation}
	and
	\begin{equation}
		g_\varepsilon := f|_{E\setminus F_\varepsilon}
	\end{equation}
	is continuous. 
\end{theorem}
\end{document}
