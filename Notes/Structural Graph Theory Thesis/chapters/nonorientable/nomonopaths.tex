\section{Book-embeddings and paths}

We conjecture the following:

\begin{conjecture}\label{conj:fsk_be}
	Let $G$ be a graph and let $(B_1, \ldots, B_n)$ be a path-decomposition of $G$ of width $k$. Let $P$ be a path $(x_1, \ldots, x_b)$ where $x_i \in B_i$. 

	Given an $s$-page book-embedding $(<, \psi)$ of $P$, there exists an $f(s, k)$ book-embedding of $G$ that preserves the given book-embedding of $P$.
\end{conjecture}

If \cref{conj:fsk_be} holds, then it implies the following:

\begin{corollary}\label{corr:fsk_be}
	Let $G$ be a graph, where $G = G_0 \cup G_1 \cup \ldots \cup G_p$. $G_0$ is embedded on a surface $\Sigma$ with Euler genus $g$, and $G_i$ is a vortex on $G_0$ on a face $F_i$ of width $k$. If every graph embedded on $\Sigma$ has a book-embedding on $s$ pages, there exists a $p f$ book-embedding of $G$, where $f = f(s, k)$.
\end{corollary}

\begin{proof}
	Let $D_i$ be the $G$-clean disk on $F_i$ on which $G_i$ sits. Add chords to $F_i$ that do not cross $D_i$ so that the boundary of $F_i$ is a cycle $C_i$. Let $\Lambda_i= (x_1, \ldots, x_n)$ be the circular ordering of the vertices $D_i \cap F_i$, so the path-decomposition $(B_1, \ldots , B_n)$ is rooted on $\Lambda_i$. Extend this path-decomposition from $\Lambda_i$ to $C_i$ by adding copies of bags to every vertex in $C_i$ not in $\Lambda_i$.

	Go along $C_i$, starting at $x_1$. If a vertex $u_j$ is encountered in $C_i$ that is not in $\Lambda_i$, insert a copy of the previous bag rooted at $u_{j-1}$ and add $u_j$ to $\Lambda_i$ after $u_{j-1}$.
	
	Then the path-decomposition is on a path which starts at $x_1$ and goes around $C_i$.  
	This graph $G'$ is embedded on a surface $\Sigma$, so can be embedded on $s$ pages. From \cref{conj:fsk_be}, $G_i$ can be embedded on $f(s, k)$ pages without changing the order of the vertices on $C_i$.

	Then repeat for every vortex. The number of pages needed to embed every vortex is $p f$ where $f = f(s, k)$. 
\end{proof}

This implies \cref{conj:bded_had_pn} in the case when $\Sigma$ is an orientable surface or projective plane, through \cref{thm:apex_vertices_pagenumber} and \cref{thm:gmst}. 

However, this is incorrect. Let $G$ be a graph with a path $(x_1, \ldots, x_{16})$ and book-embedding $x_1 x_5 x_9, \ldots, x_{16}, x_{12}, x_{8}, x_{4}$, as in \cref{fig:counterexample_2}.

\begin{figure}[h!]
	\centering
	\includesvg[pretex = \tiny, width = 0.7\textwidth]{figures/counterexample2.svg}
	\caption[Counterexample to bounded number of colours]{A graph $G$ with a path $x_1, \ldots, x_{16}$ and a given embedding $x_1 x_5 x_9, \ldots, x_{16}, x_{12}, x_{8}, x_{4}$. Then we can force edges between bags to pairwise cross, breaking the condition that there are a bounded number of pages to embed this book.}\label{fig:counterexample_2}
\end{figure}


However, the following proposition holds. Let $P$ be a path. A \textit{$k$-perturbation} of $P$ is an operation that partitions $P$ into subpaths $P_1, \ldots, P_n$ and for every $P_i$, $k$ vertices are moved to the front of $P_i$. 

\begin{proposition}
	Let $G$ be a graph with a path $P = (P_1, P_2, \ldots, P_m)$ such that $P_i = (x_{i,1}, x_{i,2}, \ldots, x_{i, n_{i}})$ is a subpath of $P$. Suppose further $G$ has a path-decomposition \[(B_{1,1}, B_{1,2}, \ldots, B_{1,n_{1}}, \ldots, B_{m, n_{m}})\] such that $x_{i,j} \in B_{i,j}$ and $|B_{i,j}| \leq k$. Given any $\ell$-perturbation $P'$ of $P$, there is a $(k + 1 + \ell)$-page book-embedding of $G$ respecting $P'$.
\end{proposition}

\begin{proof}
	Let $Z_i$ be the set of vertices moved to the front of $P_i$. Let bag $B'_{i,j} = B_{i,j} \cup Z_i$ for all $i$. Then the bags $B'_{i,j}$ is a path-decomposition of $G$. Every edge in $G$ is in some bag by definition, and if $x \in A_i \cap A_j$, then $x$ must be in some bag in $B_{j, \cdot}$, so $x$ must be in all the bags from $B_{a, \cdot}$ to $B_{j, \cdot}$, as $G$ has an original path-decomposition.  
	
	Let $A_i$ be the subpath $P_i$ with $Z_i$ removed. 

	Let $v$ be a vertex in some $A_i$. Let $h(v):= \min_i\left\{ v \in B_i \right\}$. The spanning subgraph $G[\cup A_i]$ has a path-decomposition \[(B_{1,1}, B_{1,2}, \ldots, B_{1,n_{1}}, \ldots, B_{m, n_{m}})\] minus vertices in $Z_i$, so there is a book-embedding of $G[\cup A_i]$ in $k + 1$ colours.
	
	Let $v_{i,a}$ be a vertex in some $A_i$. Let $h(v_{i,a}) := \min_i\left\{ w \in A_i \right\}$. Then colour $v_{i,a}$ so that $v_{i,a}$ is given a different colouring from any other vertex in $P_i$. So $(k + 1 + \ell)$ colours are used.


	Let $P' = Z_1 A_1 \ldots Z_m A_m$. Let $\psi(vw)$ equal $\psi(v)$ if $v$ is before $w$ in $P'$. Then this book-embedding does not cross, as this is the same book-embedding as \cref{thm:pw_book_embedding}. Then the number of pages used is the number of colours used, which is $(k + 1 + \ell)$. 

\end{proof}