% !TEX root = ./thesis.tex

\section{Pagenumber of projective-planar graphs}
This section discusses graphs embedded on non-orientable surfaces. Heath and Istrail claimed to prove \cref{lem:planar_nonplanar_nonorientable}.
\begin{conjecture}\label{lem:planar_nonplanar_nonorientable}
	Suppose a graph \(G\) has a planar-nonplanar decomposition \((G_P, E_N)\) on a non-orientable surface \(\Sigma\) of non-orientable genus $g$. Then \(G\) can be embedded on \( O(g)\) pages.
\end{conjecture}
However, the outline given in their paper is insufficient to prove \cref{lem:planar_nonplanar_nonorientable}. In fact, their proof method fails when a graph is projective-planar, as stated by \textcite{nakamotoBookEmbeddingProjectiveplanar2015} and \textcite{ozekiBookEmbeddingGraphs2019}. We came to the same conclusion after attempting to apply their proof to some simple projective-planar graphs. An example of a projective-planar graph is in \cref{fig:projectiveplanar}.
As \textcite{Blankenship-PhD03} relies on Heath and Istrail's result, we are confident that \cref{conj:bded_had_pn} is still an open problem. 

However, \textcite{nakamotoBookEmbeddingProjectiveplanar2015} prove the following theorem:

\begin{figure}[h]
    \centering
    \includesvg[width = 0.5 \textwidth]{figures/projective_planar_graph.svg}
    \caption[Projective planar graph]{Graph embedded on the projective plane, the purple circle. This graph is not a triangulation of the projective plane as the edges that pass through the projective plane do not bound a triangle.}\label{fig:projectiveplanar}\end{figure}

\begin{theorem}[\textcite{nakamotoBookEmbeddingProjectiveplanar2015}]\label{thm:proj_planar_graphs_9pages}
	Every graph embedded on the projective plane has a book-embedding with nine pages.
\end{theorem}
Firstly, a planar spanning disk is found with nonplanar edges. Then a non-contactable cycle is found which intersects the boundary of the disk exactly twice. Finally, a book-embedding is found.

This proof relies on triangulations of surfaces. Recall a graph $G$ is a \textit{triangulation} of a surface $\Sigma$ if every face has three distinct vertices on its boundary. Note that unlike graphs embedded on the sphere, there exists graphs embedded on surfaces which are edge-maximal but not a triangulation. \textcite{hararyMaximalToroidalGraph1973} gives an example of such a graph embedded on a torus. 

\begin{theorem}\label{thm:triangulation_subgraph}
    Every graph embedded on a surface $\Sigma$ is a subgraph of a triangulation of $\Sigma$.
\end{theorem}

\begin{proof}
    Let $G$ be a graph embedded on $\Sigma$. If a face is bounded by a simple cycle $C$ of length $k \geq 4$, then add a vertex $v$ in the centre of the face and have every vertex in $C$ be adjacent to $v$. Suppose a face $F$ has reappearing vertices on its boundary walk, $v_0, \ldots, v_{k-1}$. Then as $G$ is simple and therefore loopless, the reappearing vertices are non-consecutive. Add a maximal outerplanar graph with $k$ vertices on the interior of $F$ with boundary $w_0, \ldots, w_{k-1}$ and add edges $v_i w_i$ and $v_i w_{i + 1}$ for $i = 0, \ldots, {k-1}$ modulo $k$. Doing this operation on every face of $G$ is a triangulation of $\Sigma$, with $G$ a subgraph of this graph. An example of such a triangulation is \cref{fig:triangulation}.
\end{proof}
\begin{figure}[h!]
    \centering
    \includesvg[width = 0.5 \textwidth]{figures/facetriangulation.svg}
    \caption[Face triangulation]{A triangulation of a face with five vertices on its boundary, where there exists a duplicate green vertex.}\label{fig:triangulation}
\end{figure}
As a consequence, every projective-planar graph is a subgraph of a triangulation of the projective plane. 

Recall a cycle $C$ in $G$ embedded on $\Sigma$ is \textit{contractible} if $C$ in $\Sigma$ as a loop is null-homotopic. Otherwise, $C$ is \textit{ non-contractible}. A subpath of a path $P$ in a graph $G$ between vertices $x$ and $y$ inclusive is $P[x, y]$. A subpath between $x$ and $y$ exclusive is $P(x, y)$. 
A \textit{link} of a vertex $v$ is the cycle that goes around the boundary of the union of the faces incident to $v$. This coincides with the definition of a link in a simplicial complex from topology. 

To prove this theorem, \cref{lem:proj_planar triangulation} is used to find a planar spanning subgraph.

\begin{lemma}\label{lem:proj_planar triangulation}
    Let $G$ be a triangulated projective-planar graph. Then there exists a planar spanning subgraph $G_P$ with outer cycle $B$ that is contractible, nonplanar edges $E_N$, and a non-contractible cycle $C$. Furthermore, there exists two vertices $x, y$ such that $\{x, y \} = V(C) \cap V(B)$, $xy \in E_N$ and $C - xy$ has no edges in $E_N$. 
\end{lemma}

\begin{proof}
     Firstly, there exists a non-contractible cycle in $G$. If every cycle of $G$ is contractible, then $G$ is planar. Then $G$ is not projective-planar. Therefore, $G$ has a non-contractible cycle. Now let $C$ be the shortest non-contractible cycle. Let $xy$ be an edge in $C$. Let $P = C - xy$ be a path starting at $x$ and ending at $y$. 
    Number the vertices of $P = v_1, \ldots, v_m$. 

    Locally define the left-hand side and right-hand side of $P$. Take $r_i$ to be the vertex on the right hand of $P$ such that $v_i v_{i + 1} r_i$ bounds a face in $G$. Let $R_i$ be the right-hand path from $r_i$ to $r_{i + 1}$ on the link of $v_i$, disjoint from $P$. Let 
    \begin{equation*}
        R' = v_1 r_1 + \bigcup_{i = 1}^n R_i + r_{m-1} v_m
    \end{equation*}
    be a walk from $x$ to $y$ disjoint from $P$. Take $R$ to be a path from $x$ to $y$, $R \subseteq R'$. Repeat for $L$, the left-hand side path from $x$ to $y$. Now $P, R, L$ are internally-disjoint paths. Suppose $R$ and $L$ have a common inner vertex $k$. Then this means that for two vertices $x_i, x_j$, $k$ is a right-hand neighbour of $x_i$ and a left-hand neighbour of $x_j$. Now the cycle $(k v_i) (v_i v_{i + 1}), \ldots , (v_j k)$ is non-contractible, as the cycle passes through $C$ and thus lies on a crosscap. However, $i, j$ is not $1$ or $m$. The only neighbour of $x$ is $r_2$. The only neighbour of $y$ is $r_{m-1}$. $r_1$ and $r_2$ are distinct except when $C$ has three vertices, the shortest cycle possible. In this case, $k$ cannot exist as this implies that $G$ is not simple. Therefore, $C'$ is shorter than $C$, breaking the assumption that $C$ is the smallest non-contractible cycle.

    Now $P, R, L$ are three-internally disjoint paths from $x$ to $y$ where $P \cup R$ and $P \cup L$ are null-homotopic cycles that bound disks $D_1, D_2$. As $P$ is a contractible path, $D_1 \cup D_2$ is also a disk, therefore $R \cup L$ bounds a disk $D$. If every vertex is contained in $D$, then a planar subgraph has been found. Otherwise, find a vertex $v$ not in $D$. Since triangulations are 3-connected, there are three internally-disjoint paths $P_1, P_2, P_3$ from $v$ to $D$, ending at vertices $v_1, v_2, v_3$ respectively. Then two vertices will be distinct, suppose they are $v_1, v_2$. Then there is a path $R'$ from $v_1$ to $v_2$ on the boundary of $D$ such that $R' \cup P_1 \cup P_2$ is a contractible cycle. This is because if $P_1 \cup P_2 \cup R'$ contains a crosscap, then either $P_3 \cup P_2 \cup R'$ contains no crosscap and is a disk, or $P_1 \cup P_3 \cup R'$ is a disk. Relabel if necessary. Then add this disk to $D$ to grow $D$. As this procedure can be repeated for every vertex, there exists a spanning planar subgraph $G_p$ of $G$, where $G_P = D$, the subgraph contained in $D$. Finally, $C$ is a noncontractible cycle where $C \cap \partial D = \{x, y\}$ by construction of the disk $D$. 
\end{proof}
A description of what this construction looks like is in \cref{fig:projectiveplanardecomp}.
\begin{figure}[h]
    \centering
    \includesvg[width = 0.6 \textwidth]{figures/projectiveplanar_decomposition.svg}
    \caption[Projective-planar decomposition]{A decomposition of a projective-planar graph into components in \cref{lem:proj_planar triangulation}.}\label{fig:projectiveplanardecomp}
\end{figure}

Now we will prove \cref{thm:proj_planar_graphs_9pages}. This is done by breaking the disk into two halves and finding a book-embedding where the non-orientable edges are nested.
\begin{proof}
    Let $H$ be a projective-planar graph. Let $G$ be a triangulation of the projective plane, where $H$ is a subgraph.
    Now apply \cref{lem:proj_planar triangulation} to $G$. Let $B_1, B_2$ be the two paths from $x$ to $y$ on the boundary of $B$. Let $D_1$ be the planar subgraph bounded by $P \cup B_1$, similarly for $D_2$. Finally, let $s$ be the vertex clockwise to $x$ on $B$, and let $t$ be the vertex clockwise to $y$ on $B$.

    From \cref{thm:4Pages_Planar}, there exists a four-page embedding $(<_1, \sigma_1)$ of $D_1$ which preserves the cycle $P \cup B_1$. Similarly, there exists a four-page embedding $(<_2, \sigma_2)$ of $D_2$ which preserves the cycle $P \cup B_2$.
    Let $t$ be at the start of the vertex ordering of $<_1$ and $s$ be at the end of the vertex ordering of $<_2$. 
    Combine these two embeddings along $P$ (interlace $<_1, <_2$ along $P$) to form a book-embedding $(<, \sigma)$ of $G_P$ with eight pages. This is a vertex ordering of every edge in $G$ as $G_P$ is spanning. 

    Now for edges in $E_N$. Let $W = B_1[t, x] xy B_2[y, s]$ be a walk which starts at $t$ and ends at $s$. Note that all edges of $E_N$ goes from $B_1$ to $B_2$ because they pairwise cross. Traversing from $t$ to $x$ and from $s$ to $y$ in $<$, every edge in $E_N$ not adjacent to $x$ is nested. Therefore, all edges can be added to a new page. For the inner pages from $B_1$ to $x$, or from $B_2$ to $y$, add to an old page in $D_2$ or $D_1$ respectively. 

    An example of the book-embedding is in \cref{fig:projectiveplanarbookembedding}. The path given is the book-embedding of $B \cup P$, the coloured regions are the book-embeddings of $D_1$ and $D_2$, and the other edges are edges in $E_N$. 
    This embeds a projective-planar graph in nine pages.
\end{proof}


\begin{figure}[h]
    \centering
    \includesvg[width = 0.8 \textwidth]{figures/projectiveplanar_bookembedding.svg}
    \caption[Projective-planar book-embedding]{A book-embedding of a projective plane in nine pages. The blue regions are a book-embedding of $D_1$ and $D_2$ respectively. The central path is the path $B_1 xy B_2$, with the vertices in $D_1$ and $D_2$ in between. The long edge are edges that pass through the crosscap. These edges are nested, so do not pairwise cross in this embedding. These edges can be embedded on a single page. }\label{fig:projectiveplanarbookembedding}
\end{figure}
 This upper bound was improved by \textcite{ozekiBookEmbeddingGraphs2019}. They showed that every projective-planar graph can be embedded in six pages. Their proof used \textit{Tutte paths}, which are paths in planar graphs with certain properties. They tie Tutte paths with the observation in \cref{thm:4-connected_planar_ham_cycle} to find better book-embeddings. 
