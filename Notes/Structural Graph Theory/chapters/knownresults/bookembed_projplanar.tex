% !TEX root = ./thesis.tex

\section{Pagenumber of projective-planar graphs}
In the non-orientable case, Heath and Istrail claim to prove the below conjecture.
\begin{conjecture}\label{lem:planar_nonplanar_nonorientable}
	Suppose a graph \(G\) has a planar-nonplanar decomposition \((G_P, E_N)\) on a non-orientable surface \(\Sigma\) of genus $g$. Then \(G\) can be embedded on \( O(g)\) pages.
\end{conjecture}
However, the outline given in their paper is insufficient to prove \cref*{lem:planar_nonplanar_nonorientable}. In fact, their proof method fails when a graph is projective-planar. 
An example of a projective-planar graph is in \cref{fig:projectiveplanar}.

\begin{figure}[h]
    \centering
    \includesvg[width = 0.8 \textwidth]{figures/projective_planar_graph.svg}
    \caption{Projective planar graph}\label{fig:projectiveplanar}
\end{figure}
\textcite{nakamotoBookEmbeddingProjectiveplanar2015} also notice this error and proves the following theorem.

\begin{theorem}[\textcite{nakamotoBookEmbeddingProjectiveplanar2015}]\label{thm:proj_planar_graphs_9pages}
	Every graph embedded on the projective plane has a book-embedding with $9$ pages.
\end{theorem}

This proof relies on a \textit{triangulated} projective plane graphs. This means that every face has three distinct vertices on its boundary. Note that unlike graphs embedded on the sphere, there exists graphs embedded on surfaces which are edge-maximal but not a triangulation. \textcite{hararyMaximalToroidalGraph1973} gives an example of such a graph. Therefore, vertices will need to be added to every graph. 

\begin{theorem}
    Every projective-planar graph is a subgraph of a triangulated projective-planar graph.
\end{theorem}

\begin{proof}
    Let $G$ be a projective-planar graph. If a face is bounded by a cycle $C$ of length $k \geq 4$, then add a vertex $v$ in the centre of the face and have every vertex in $C$ be adjacent to $v$. Suppose a face $F$ has reappearing vertices on its boundary walk, $v_0, \ldots, v_{k-1}$. Then as $G$ is simple, the reappearing vertices must be non-consecutive, and $k \geq 4$. Add a maximal outerplanar graph with $k$ vertices on $F$ with boundary $w_0, \ldots, w_{k-1}$ and add edges $v_i w_i$ and $v_i w_{i + 1}$ for $i = 0, \ldots, {k-1}$ modulo $k$. Doing this operation on every face of $G$ is a triangulation of the projective plane, with $G$ a subgraph of this graph.  
\end{proof}

A cycle $C$ in $G$ embedded on $\Sigma$ is \textit{contractible} if $C$ in $\Sigma$ as a loop is null-homotopic. Otherwise $C$ is non-contractible. 
A \textit{link} of a vertex $v$ is the boundary of the union of the faces that touch $v$. This coincides with the definition of a link in a simplicial complex.

To prove this theorem, we prove an auxiliary lemma. 

\begin{lemma}\label{lem:proj_planar triangulation}
    Let $G$ be a triangulated projective-planar graph. Then there exists a planar spanning subgraph $G_P$ with outer cycle $B$ that is contractible, nonplanar edges $E_N$, and a non-contractible cycle $C$. Furthermore, there exists two vertices $x, y$ such that $\{x, y \} = V(C) \cap V(B)$, $xy \in E_N$ and $C - xy$ has no edges in $E_N$. 
\end{lemma}

\begin{proof}
    Let $C$ be the shortest non-contractible cycle of $G$. This exists as every face of $G$ is a disk, so if there are no non-contractible cycles in $G$, then $G$ is planar. Therefore, $G$ is not projective-planar. Let $xy$ be an edge in $C$. Let $P = C - xy$ be a path starting at $x$ and ending at $y$. 
    Number the vertices of $P = v_1, \ldots, v_m$. 

    Locally define the left hand side and right hand side of $P$. Take $r_i$ to be the vertex on the right hand of $P$ such that $v_i v_{i + 1} r_i$ bounds a face in $G$. Let $R_i$ be the right hand path from $r_i$ to $r_{i + 1}$ on the link of $v_i$, disjoint from $P$. Then let the walk $R'$ start at $v_1 r_1$, be the concatenation of all $R_i$ to $m-1$, and then go $r_{m-1} v_m$. This is a walk from $x$ to $y$ disjoint from $P$. Then take $R$ to be a path from $x$ to $y$, $R \subseteq R'$. Then repeat for $L$, the left hand side path from $x$ to $Y$. Now these three paths are disjoint. Suppose $R$ and $L$ have a common inner vertex, call it $x$. Then this means that for two vertices $x_i, x_j$, $x$ is a right hand neighbour of $x_i$ and a left hand neighbour of $x_j$. Now the cycle $(x v_i) (v_i v_{i + 1}), \ldots , (v_j x)$ non-contractible, as the cycle must pass through $C$ and thus must lie on a crosscap. However, $i, j$ is not $1$ or $m$ because we go to $r_2$ or $r_{m-1}$. Therefore, $C'$ is shorter than $C$, breaking the assumption that $C$ is the smallest non-contractible cycle.

    Now $P, R, L$ are three-internally disjoint paths from $x$ to $y$ where $P, R$ and $P, L$ are null-homotopic. As $P$ is a contractible path, the union of the two disks are also a disk, therefore $R, L$ bounds a disk $D$. If every vertex is contained in $D$, we are done. Otherwise, find a vertex $v$ not in $D$. Since triangulations are 3-connected, there are three disjoint paths $P_1, P_2, P_3$ from $v$ to $D$, ending at vertices $v_1, v_2, v_3$ respectively. Then two vertices will be distinct, suppose they are $v_1, v_2$. Then there is a path $R'$ from $v_1$ to $v_2$ on the boundary of $D$ such that $R' \cup P_1 \cup P_2$ is a contractible cycle. Then add this disk to $D$ to enlarge $D$. As this procedure can be repeated for every vertex, there exists a planar graph $G_p = D$ of $G$. 
\end{proof}

Now we will prove \cref{thm:proj_planar_graphs_9pages}.
\begin{proof}
    Let $H$ be a projective-planar graph. Let $G$ be a triangulation of $H$.
    Now apply \cref{lem:proj_planar triangulation}. Let $G_P$ be the spanning planar subgraph in $G$, let $B$ be its planar boundary, let $E_N$ be the nonplanar edges and let $C$ be the non-contractible cycle, with edges $x, y$ on $B$. $G_P$ is edge-maximal planar. Let $B_1, B_2$ be the two paths from $x$ to $y$ on the boundary of $B$. Let $D_1$ be the planar subgraph bounded by $P \cup B_1$, similarly for $D_2$. 

    From \cref{thm:4Pages_Planar}, there exists a $4$-page embedding $(<_1, \sigma_1)$ of $D_1$ which preserves the cycle $P \cup B_1$. Similarly, there exists a $4$-page embedding $(<_2, \sigma_2)$ of $D_2$ which preserves the cycle $P \cup B_2$. Combine these two embeddings along $P$ (interlace $<_1, <_2$ along $P$) to form a book-embedding $(<, \sigma)$ with $8$ pages of $G$. 

    Now for edges in $E_N$. Let $W = B_1[x, y) xy B_2(y, x]$ be a walk which starts and ends in $x$. Let $R$ be the subgraph of $G$ bounded by $W$. Note that all edges of $R$ must go from $B_1$ to $B_2$ because they all must pairwise cross. Since $G$ is a triangulation, $R$ has edges from one half to the other half. Then $R'$ is maximal outerplanar. $R'$ has a 1-page embedding with the same $(<, \sigma)$. Add all edges to a new page. For the inner pages from $B_1$ to $x$, or from $B_2$ to $y$, add to an old page. 
\end{proof}

This is a very short proof embedding a projective-planar graph in 9 pages. This upper bound was improved by \textcite{ozekiBookEmbeddingGraphs2019}. They showed that all projective-planar graphs can be embedded in 6 pages. Their proof used \textit{Tutte paths}, which are paths in planar graphs with certain properties. They tie Tutte paths with the observation in \cref{thm:4-connected_planar_ham_cycle} to find book-embeddings of every graph.  

An open problem in \textcite{ozekiBookEmbeddingGraphs2019} is this:
\begin{conjecture}
    Every graph embedded on a Klein Bottle can be embedded in a bounded number of pages.
\end{conjecture}

A possible approach would be to find a way to divide the Klein bottle into a planar spanning subgraph and nonplanar edges where each edge goes through a single crosscap. Then find a way to partition the planar subgraph so that the boundary of each region can go through one edge. Furthermore, the boundary of $G_P$ has to be oriented so that edges that go through a crosscap is reversed and edges that go through two crosscaps are in the same direction. 